<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ethereum Light</title>
</head>
<body>
    <h1>Mainnet config</h1>
    CAPELLA_FORK_EPOCH: <b><span id="capellaForkEpoch"></span></b><br /><br />
    <pre id="configOutput"></pre>

    <script>
        async function loadCfg() {
            let response = await fetch('https://raw.githubusercontent.com/eth-clients/eth2-networks/master/shared/mainnet/config.yaml');
            let data = await response.text();
            document.getElementById('configOutput').innerText = data;

            let fileContent = Module.stringToNewUTF8(data);
            let cfg = Module._ETHRuntimeConfigCreate(fileContent);
            assert(cfg);
            Module._free(fileContent);

            let CAPELLA_FORK_EPOCH = Module._ETHRuntimeConfigGetCapellaForkEpoch(cfg);
            document.getElementById('capellaForkEpoch').innerText = CAPELLA_FORK_EPOCH;

            Module._ETHRuntimeConfigDestroy(cfg);
        }

        var Module = {
            onRuntimeInitialized: function() {
                loadCfg();
            }
        };
    </script>
    <script async src="light_client_wasm.js"></script>
</body>
</html>
